 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 1 - 01/26/2026 09:51:58 PM


       1/       0 :                     
       2/       0 : =$0                  CURDRV    EQU     $0000
       3/       0 :                     
       4/       0 : =$6                  CURADRH   EQU     $0006
       5/       0 : =$8                  FDSTAT    EQU     $0008
       6/       0 :                     
       7/       0 : =$D                  STATSAV EQU     $000D
       8/       0 : =$E                  FUNCSAV EQU     $000E
       9/       0 : =$13                 TRACKSAV  EQU     $0013
      10/       0 : =$14                 ADDRMRK   EQU     $0014
      11/       0 :                     
      12/       0 : =$19                 CLKFREQ   EQU     $0019
      13/       0 :                     
      14/       0 :                     ; The PIA has A0 and A1 switched!
      15/       0 :                     ; 00 with CRA2 Set is Peripheral Register A 
      16/       0 :                     ; 00 with CRA2 cleared is Data Direction Register A 
      17/       0 :                     ; 01 with CRB2 Set is Peripheral Register B 
      18/       0 :                     ; 01 with CRB2 cleared is Data Direction Register B 
      19/       0 :                     ; 02 is Control Register A
      20/       0 :                     ; 03 is Control Register B
      21/       0 : =$EC00               PIAREGA EQU     $EC00
      22/       0 : =$EC01               PIAREGB EQU     $EC01
      23/       0 : =$EC02               PIACTRL EQU     $EC02
      24/       0 : =$EC04               SSDA_0  EQU     $EC04
      25/       0 : =$EC05               SSDA_1  EQU     $EC05
      26/       0 :                     
      27/       0 : =$E8C2               DRVRDY   EQU    $E8C2
      28/       0 : =$E940               SETERR	EQU    $E940
      29/       0 : =$E991               ERRHNDLR	EQU    $E991
      30/       0 : =$EE40               STORTRACKS EQU  $EE40
      31/       0 :                     ;##########################  ATTENTION from approx E9C0 difference in 
      32/       0 : =$EAE0               RETRG    EQU    $EAE0
      33/       0 : =$E9D2               NXTSEC  EQU     $E9D2
      34/       0 :                     ; ################################################################
      35/       0 :                     ; Jump Table
      36/       0 :                     ; ################################################################
      37/    ED00 :                     		ORG $ED00
      38/    ED00 :                     ;ED00	jmp $ED20
      39/    ED00 : 20 09               	BRA  SETUP
      40/    ED02 :                     
      41/    ED02 :                     ;WAIT4	ldx 	#$800
      42/    ED02 : D6 19               WAIT3    LDAB    CLKFREQ     ; is 3 for 1MHz
      43/    ED04 : 5A                  WAIT1    DECB                ; 
      44/    ED05 : 26 FD                        BNE     WAIT1       ; 
      45/    ED07 : 09                           DEX                 ; 
      46/    ED08 : 26 F8                        BNE     WAIT3       ; 
      47/    ED0A : 39                           RTS                 ; 
      48/    ED0B :                     
      49/    ED0B :                     ;		ORG $ED06
      50/    ED0B :                     ;ED06	
      51/    ED0B :                     ;	STAA    TRACKSAV     ; contains track (0 if RESTOR or 3)
      52/    ED0B :                     ;	SBA
      53/    ED0B :                     ;	jmp $E90D
      54/    ED0B :                     
      55/    ED0B :                     ;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
      56/    ED0B :                     ; DS1 is not used!
      57/    ED0B :                     ;             PA0 PA1 PB5
      58/    ED0B :                     ;             DS0 DS1 DS2
      59/    ED0B :                     ; DRVNUM = 0  low hi  hi
      60/    ED0B :                     ; DRVNUM = 1  hi  low hi
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 2 - 01/26/2026 09:51:58 PM


      61/    ED0B :                     ; DRVNUM = 2  low hi  low
      62/    ED0B :                     ; DRVNUM = 3  hi  low low
      63/    ED0B :                     ;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
      64/    ED0B :                     ;		ORG $ED20
      65/    ED0B : 86 03               SETUP	LDAA    #$03
      66/    ED0D : 91 00               	CMPA    CURDRV              ; is 0 at start
      67/    ED0F : 25 31                        BCS     SERR3               ; if CURDRV > 1 Set Error 3
      68/    ED11 :                              ;BEQ     ZE8AD               ; if CURRDRV == 0
      69/    ED11 :                     
      70/    ED11 : 86 FE                        LDAA    #$FE
      71/    ED13 : B7 FE 04                     STAA    $FE04
      72/    ED16 : 96 00                        LDAA    CURDRV                   ; E99E: D6 00     ; 
      73/    ED18 : 84 03               	ANDA    #$03
      74/    ED1A : B7 FE 05                     STAA    $FE05
      75/    ED1D : 97 00                        STAA    CURDRV
      76/    ED1F : B7 EC 00                     STAA    PIAREGA             ; Write DS0, TG43, DIRQ, HLD low, Set DS1
      77/    ED22 : FE FE 04                     LDX     $FE04
      78/    ED25 : A6 00                        LDAA    ,X
      79/    ED27 : 97 13                        STAA    TRACKSAV                 ; E99C: 96 13     ; 
      80/    ED29 :                              
      81/    ED29 : 86 62                        LDAA    #$62          ; Set DS3(side) and DS2 high
      82/    ED2B : D6 00                        LDAB    CURDRV
      83/    ED2D : C4 02                        ANDB    #$02          ; if Drive 2 or 3 is set
      84/    ED2F : 27 02                        BEQ     STORE         ; If Drive 0 or 1 is active, Set PB5
      85/    ED31 : 84 42                        ANDA    #$42          ; Set Side high and DS2 low
      86/    ED33 : B7 EC 01            STORE    STAA    PIAREGB
      87/    ED36 :                     	
      88/    ED36 :                     	;ldx     #$0011
      89/    ED36 :                     	;LDAA    #$01
      90/    ED36 :                     	;LDAA    CURDRV              ; is 0 at start
      91/    ED36 :                              ;BCS     SERR3               ; if CURDRV > 1 Set Error 3
      92/    ED36 :                              ;BEQ     ZE8AD               ; if CURRDRV == 0 leave it @ $12
      93/    ED36 :                              ;INX                         ; else, down to $11
      94/    ED36 :                              ;INCA                        ; A is 2 now
      95/    ED36 :                     ZE8AD    ;STAA    PIAREGA             ; Write DS0, TG43, DIRQ, HLD low, Set DS1
      96/    ED36 :                              ;LDAA    ,X                  ; X @ $11 for Drive 0 or $12 for Drive 1
      97/    ED36 :                              ;STAA    TRACKSAV            ; 
      98/    ED36 :                              
      99/    ED36 :                              ;PSHB
     100/    ED36 :                              ;bsr 	WAIT4
     101/    ED36 :                              ;PULB
     102/    ED36 : 86 40                            LDAA    #$40        ; PA6 (RDY)
     103/    ED38 : B5 EC 00            CHECKAGAIN   BITA    PIAREGA     ; Check Drive Ready
     104/    ED3B : 26 FB                            bne 	CHECKAGAIN
     105/    ED3D : D6 0E               	    LDAB    FUNCSAV
     106/    ED3F : 7E E8 C2                         JMP     DRVRDY     ; 
     107/    ED42 :                     
     108/    ED42 : C6 33               SERR3    LDAB    #$33        ; Error '3' (DISK NOT READY)
     109/    ED44 : 7E E9 40                     jmp     SETERR      ; 
     110/    ED47 :                     ;------------------------------------------------
     111/    ED47 :                     ;DRVRDYJ  jmp     DRVRDY
     112/    ED47 :                     ;	jmp $E8A3
     113/    ED47 :                     ;------------------------------------------------
     114/    ED47 :                     
     115/    ED47 :                     
     116/    ED47 :                     ;------------------------------------------------
     117/    ED47 :                     ;
     118/    ED47 :                     ;------------------------------------------------
     119/    ED60 :                     		ORG $ED60
     120/    ED60 : CE D0 D8            READINIT        LDX     #$D0D8                   ; E9AC: CE D0 D8  ; Select CR2 and Inhibit SM, 2-Byte RDA, 8-Bit Word
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 3 - 01/26/2026 09:51:58 PM


     121/    ED63 : FF EC 04                            STX     SSDA_0                   ; E9AF: FF EC 04  ; |
     122/    ED66 : CE EC 00                            LDX     #PIAREGA                 ; E9B2: CE EC 00  ; 
     123/    ED69 : 86 50                               LDAA    #$50                     ; E9B5: 86 50     ; 
     124/    ED6B : A7 04                               STAA    $04,X              ;6    ; E9B7: A7 04     ; Write $50 to SSDA_0 (Enable Read)
     125/    ED6D :                                     ;STAA    SSDA_0            ;5    ; E9B7: A7 04     ; Write $50 to SSDA_0 (Enable Read)
     126/    ED6D :                                     ;LDAA    #$07    ;changed  ;-2   ; E9B9: 86 07     ; 
     127/    ED6D :                                     ;LDAA    $01,X             ;+5                      ; Read PIAREGB
     128/    ED6D : B6 EC 01                            LDAA    PIAREGB            ;+4                      ; Read PIAREGB
     129/    ED70 : 84 60                               ANDA    #$60               ;+2                      ; clear all but Bit 6,7
     130/    ED72 : 8A 07                               ORAA    #$07               ;+2                      ; same as before but leave PB5,6
     131/    ED74 : A7 01                               STAA    $01,X   ;write PIAREGB ;6 ; E9BB: A7 01     ; Set Bit0,1,2 in PIAREGB (Set to Read, Reset active., WG inact.)
     132/    ED76 :                                     ;STAA    PIAREGB ;write PIAREGB ;5  ; E9BB: A7 01     ; Set Bit0,1,2 in PIAREGB (Set to Read, Reset active., WG inact.)
     133/    ED76 : 6A 01                               DEC     $01,X   ;write PIAREGB ;7  ; E9BD: 6A 01     ; Reset inact.
     134/    ED78 :                                     ;DEC     PIAREGB ;write PIAREGB ;6  ; E9BD: 6A 01     ; Reset inact.
     135/    ED78 :                                    ; INX                       ;-4    ; E9BF: 08        ; useless or timing?
     136/    ED78 :                                    ; DEX                       ;-4    ; E9C0: 09        ; useless or timing?
     137/    ED78 : 4A                                 DECA                        ;+2                     ; timing
     138/    ED79 : 86 40                               LDAA    #$40                     ; E9C1: 86 40     ; Write $40 to SSDA_0 (Enable Sync, Select CR2)
     139/    ED7B : A7 04                               STAA    $04,X                    ; E9C3: A7 04     ; 
     140/    ED7D : 86 98                               LDAA    #$98                     ; E9C5: 86 98     ; Write $98 to SSDA_1 (Enable SM Output)
     141/    ED7F : A7 05                               STAA    $05,X                    ; E9C7: A7 05     ; 
     142/    ED81 : 39                                  RTS                              ; E9C9: 39        ; 
     143/    ED82 :                     
     144/    ED82 :                     ;------------------------------------------------
     145/    ED82 :                     ;
     146/    ED82 :                     ;------------------------------------------------
     147/    ED90 :                     		ORG $ED90
     148/    ED90 : C6 32               SERR2           LDAB  #$32                                        ;Set Error '2' (DISK WRITE PROTECTED) 
     149/    ED92 : 7E E9 40                            JMP SETERR
     150/    ED95 :                     
     151/    ED95 : CE C0 DA            WRITINI2        LDX     #$C0DA                   ; EADD: CE C0 DA  ; 
     152/    ED98 : FF EC 04                            STX     SSDA_0                   ; EAE0: FF EC 04  ; 
     153/    ED9B : CE C1 AA                            LDX     #$C1AA                   ; EAE3: CE C1 AA  ; 
     154/    ED9E : FF EC 04                            STX     SSDA_0                   ; EAE6: FF EC 04  ; 
     155/    EDA1 : CE C2 70                            LDX     #$C270                   ; EAE9: CE C2 70  ; 
     156/    EDA4 : FF EC 04                            STX     SSDA_0                   ; EAEC: FF EC 04  ; 
     157/    EDA7 : 7C EC 01                            INC     PIAREGB  ;write PIAREGB  ; EAEF: 7C EC 01  ; Reset inactive (PB0 high)
     158/    EDAA : 86 82                               LDAA    #$82                     ; EAF2: 86 82     ; Bit 1,7
     159/    EDAC : B7 EC 04                            STAA    SSDA_0                   ; EAF4: B7 EC 04  ; 
     160/    EDAF :                                    ; DEX                         ;-4     ; EAF7: 09        ; useless ?
     161/    EDAF : B6 EC 01                            LDAA    PIAREGB  ; changed   ;+4                        
     162/    EDB2 : 85 10                               BITA    #$10     ; changed   ;-2                   ; Check Writeprot?
     163/    EDB4 : 26 DA                               BNE     SERR2        ;changed    ; EB00: 26 93     ; If high set Error (otherwise it conflicts with format.sy)
     164/    EDB6 : 84 60                               ANDA    #$60     ; changed   ;+2                   ; Clear all but Bit 5,6 (DS2, DS3)
     165/    EDB8 : 16                                  TAB                         ;+2
     166/    EDB9 : 8A 02                               ORAA    #$02     ; changed   ;+2                   ; Set Bit 1 (WG high)
     167/    EDBB : B7 EC 01                            STAA    PIAREGB  ;write PIAREGB ;+5 ; EAF8: B7 EC 01  ; WG off, PB7 is an Input 
     168/    EDBE :                                     ;LDAA    #$10               ;-2   ; EAFB: 86 10     ; Bit 4
     169/    EDBE :                                     ;BITA    PIAREGB                  ; EAFD: B5 EC 01  ; Check Writeprot?
     170/    EDBE :                                     ;BEQ     SERR2                    ; EB00: 27 93     ; If low set Error
     171/    EDBE : 96 19                               LDAA    CLKFREQ                  ; EB02: 96 19     ; Waitloop
     172/    EDC0 : 80 03                               SUBA    #$03                     ; EB04: 80 03     ; |
     173/    EDC2 : 48                                  ASLA                             ; EB06: 48        ; |
     174/    EDC3 : 4A                  IEB07           DECA                             ; EB07: 4A        ; |
     175/    EDC4 : 2A FD                               BPL     IEB07                    ; EB08: 2A FD     ; |
     176/    EDC6 :                      ;               CLR     PIAREGB  ;write PIAREGB ;-6 ; EB0A: 7F EC 01  ; Clear all PB (Set to Write, Reset active, ShiftCRC off, WG on)
     177/    EDC6 : F7 EC 01                            STAB    PIAREGB  ;changed   ;+5                  ; Bit 5,6 (DS2, DS3 unaffected)
     178/    EDC9 :                                     ;RORB                        ;-2     ; EB0D: 56        ; useless ?
     179/    EDC9 :                     ;                BCC     IEB11                    ; EB0E: 24 01     ; 
     180/    EDC9 :                     ;                BITA    #$56                ;-2  ; EB10: 85 56     ; 
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 4 - 01/26/2026 09:51:58 PM


     181/    EDC9 :                     ;                FCB     $85                
     182/    EDC9 :                     ;IEB11           RORB                        ;-2     ;                 ; useless ?
     183/    EDC9 : CE 00 05                            LDX     #$0005                   ; EB12: CE 00 05  ; 
     184/    EDCC : BD ED 02                            JSR     WAIT3                    ; EB15: BD E9 53  ; 
     185/    EDCF : C6 40                               LDAB    #$40                     ; EB18: C6 40     ; $40 words
     186/    EDD1 : 96 14                               LDAA    ADDRMRK                  ; EB1A: 96 14     ; 
     187/    EDD3 : CE 83 F5                            LDX     #$83F5                   ; EB1C: CE 83 F5  ; 
     188/    EDD6 : FF EC 04                            STX     SSDA_0                   ; EB1F: FF EC 04  ; 
     189/    EDD9 : DE 06                               LDX     CURADRH                  ; EB22: DE 06     ; 
     190/    EDDB : B7 EC 05                            STAA    SSDA_1                   ; EB24: B7 EC 05  ; 
     191/    EDDE : 7E ED E8                            JMP     WRITSEC              ;3  ; EB27: 7E EB 31  ; 
     192/    EDE1 :                     
     193/    EDE1 : 86 40               IEB2A           LDAA    #$40                     ; EB2A: 86 40     ; 
     194/    EDE3 : B5 EC 04            IEB2C           BITA    SSDA_0                   ; EB2C: B5 EC 04  ; Transmit Datareg. empty?
     195/    EDE6 : 27 FB                               BEQ     IEB2C                    ; EB2F: 27 FB     ; If no, wait
     196/    EDE8 :                     WRITSEC         ;LDAA    PROM_0             ;-4   ; EB31: B6 FC FC  ; in PROM_0 is zero
     197/    EDE8 :                                     ;NOP                        ;-2   ; EB34: 01        ;  
     198/    EDE8 : 4F                                  CLRA           ;changed     ;+2                       
     199/    EDE9 : A6 00                               LDAA    ,X                       ; EB35: A6 00     ; Load Data from RAM
     200/    EDEB : B7 EC 05                            STAA    SSDA_1                   ; EB37: B7 EC 05  ; Write to disk
     201/    EDEE : A6 01                               LDAA    $01,X                    ; EB3A: A6 01     ; Load next Byte
     202/    EDF0 : B7 EC 05                            STAA    SSDA_1                   ; EB3C: B7 EC 05  ; Write to disk
     203/    EDF3 : 25 02                               BCS     IEB43                    ; EB3F: 25 02     ; all done?
     204/    EDF5 : 08                                  INX                              ; EB41: 08        ; if not, increase pointer
     205/    EDF6 : 08                                  INX                              ; EB42: 08        ; |
     206/    EDF7 : 5A                  IEB43           DECB                             ; EB43: 5A        ; decrease counter
     207/    EDF8 : 26 E7                               BNE     IEB2A                    ; EB44: 26 E4     ; check if underflow, if not, continue from top
     208/    EDFA : DF 06                               STX     CURADRH                  ; EB46: DF 06     ; done, store current address
     209/    EDFC : CE EC 00                            LDX     #PIAREGA                 ; EB48: CE EC 00  ;  
     210/    EDFF : 86 40                               LDAA    #$40                     ; EB4B: 86 40     ;  
     211/    EE01 : A5 04               IEB4D           BITA    $04,X                    ; EB4D: A5 04     ; Check SSDA Status Reg.
     212/    EE03 : 27 FC                               BEQ     IEB4D                    ; EB4F: 27 FC     ; Wait for Data
     213/    EE05 : E7 05                               STAB    $05,X                    ; EB51: E7 05     ; Store B to Data Register
     214/    EE07 : F6 EC 01                            LDAB    PIAREGB ;read PIAREGB ;+4  ; EB59: E7 01   ;
     215/    EE0A : A5 04               IEB53           BITA    $04,X                    ; EB53: A5 04     ; Check SSDA Status Reg.
     216/    EE0C : 27 FC                               BEQ     IEB53                    ; EB55: 27 FC     ; Wait for Data
     217/    EE0E :                                     ;STAB    $01,X   ;write PIAREGB ;-6  ; EB59: E7 01     ; Store $8 to PIAREGB (SHIFT-CRC high)
     218/    EE0E : CA 08                               ORAB    #$08                ;+2
     219/    EE10 :                                     ;STAB    $01,X               ;+6
     220/    EE10 : F7 EC 01                            STAB    PIAREGB             ;+5
     221/    EE13 : C6 08                               LDAB    #$08                     ; EB57: C6 08     ; |
     222/    EE15 : E7 05                               STAB    $05,X                    ; EB5B: E7 05     ; Store $8 to SSDA Data Reg.
     223/    EE17 : A5 04               IEB5D           BITA    $04,X                    ; EB5D: A5 04     ; Check SSDA Status Reg.
     224/    EE19 : 27 FC                               BEQ     IEB5D                    ; EB5F: 27 FC     ; Wait for Data
     225/    EE1B : C6 FF                               LDAB    #$FF                     ; EB61: C6 FF     ; |
     226/    EE1D : E7 05                               STAB    $05,X                    ; EB63: E7 05     ; |
     227/    EE1F : E7 05                               STAB    $05,X                    ; EB65: E7 05     ; Store $FF to SSDA Data Reg.
     228/    EE21 : F6 EC 01                            LDAB    PIAREGB ;read PIAREGB ;+4 
     229/    EE24 : A5 04               IEB67           BITA    $04,X                    ; EB67: A5 04     ; Check SSDA Status Reg.
     230/    EE26 : 27 FC                               BEQ     IEB67                    ; EB69: 27 FC     ; Wait for Data
     231/    EE28 : C4 60                               ANDB    #$60     ; changed ;+2
     232/    EE2A : F7 EC 01                            STAB    PIAREGB            ;+5
     233/    EE2D : 7C EC 01                            INC     PIAREGB            ;+6
     234/    EE30 : 7C EC 01                            INC     PIAREGB            ;+6
     235/    EE33 :                                     ;CLR     $01,X   ;write PIAREGB ;7  ; EB6B: 6F 01     ; Clear PIAREGB           - toggle Reset and WG high
     236/    EE33 :                                     ;INC     $01,X   ;write PIAREGB ;7  ; EB6D: 6C 01     ; |                       - toggle Reset and WG high
     237/    EE33 :                                     ;INC     $01,X   ;write PIAREGB ;7  ; EB6F: 6C 01     ; should be $2 in PIAREGB - toggle Reset and WG high
     238/    EE33 : 7E E9 D2                            JMP     NXTSEC    ; -->          ; EB71: 7E E9 D3  ; next sector
     239/    EE36 :                     
     240/    EE40 :                     		ORG $EE40
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 5 - 01/26/2026 09:51:58 PM


     241/    EE40 :                     ;STORTRACKS
     242/    EE40 : 86 FE                               LDAA    #$FE
     243/    EE42 : B7 FE 04                            STAA    $FE04
     244/    EE45 : 96 00                               LDAA    CURDRV                   ; E99E: D6 00     ; 
     245/    EE47 : B7 FE 05                            STAA    $FE05
     246/    EE4A : FE FE 04                            LDX     $FE04
     247/    EE4D : 96 13                               LDAA    TRACKSAV                 ; E99C: 96 13     ; 
     248/    EE4F : A7 00                               STAA    ,X
     249/    EE51 :                     
     250/    EE51 : 96 13                               LDAA    TRACKSAV                 ; E99C: 96 13     ; 
     251/    EE53 : D6 00                               LDAB    CURDRV                   ; E99E: D6 00     ; 
     252/    EE55 : 27 03                               BEQ     IE9A5                    ; E9A0: 27 03     ; 
     253/    EE57 : 97 12                               STAA    $12                    ; E9A2: 97 12     ; 
     254/    EE59 :                     ;                CPX     #$9711                   ; E9A4: 8C 97 11  ; 
     255/    EE59 : 8C                                  FCB     $8C
     256/    EE5A : 97 11               IE9A5           STAA    $11                                       ;
     257/    EE5C : 96 0D                               LDAA    STATSAV                  ; E9A7: 96 0D     ; 
     258/    EE5E : 39                                  RTS                              ; E9AB: 39        ; 
     259/    EE5F :                     
     260/    EFDE :                     		ORG $EFDE
     261/    EFDE :                     ;------------------------------------------------
     262/    EFDE :                     ; Calculates CPU Frequency with Disk Rotation Period
     263/    EFDE :                     ;------------------------------------------------
     264/    EFDE : BD EA E0            CLKDMD          JSR     RETRG                    ; EB85: 8D ED     ; Retrigger NMI Timer
     265/    EFE1 : E6 01                               LDAB    $01,X                    ; EB87: E6 01     ; PIAREGB Clear Interrupt Flag
     266/    EFE3 : 4F                                  CLRA                             ; EB89: 4F        ; 
     267/    EFE4 : E6 03               ZEB8A           LDAB    $03,X                    ; EB8A: E6 03     ; PIACTRLB
     268/    EFE6 : 2A FC                               BPL     ZEB8A                    ; EB8C: 2A FC     ; Wait for IRQB on CB1 (IDX)
     269/    EFE8 : E6 01                               LDAB    $01,X                    ; EB8E: E6 01     ; PIAREGB Clear Interrupt Flag
     270/    EFEA : 5F                  ZEB90           CLRB                             ; EB90: 5F        ; 
     271/    EFEB : 5A                  ZEB91           DECB                             ; EB91: 5A        ; Wait
     272/    EFEC : 26 FD                               BNE     ZEB91                    ; EB92: 26 FD     ; |
     273/    EFEE : 4C                                  INCA                             ; EB94: 4C        ; In A is the ammount of 256 ticks
     274/    EFEF : 6D 03                               TST     $03,X                    ; EB95: 6D 03     ; PIACTRLB
     275/    EFF1 : 2A F7                               BPL     ZEB90                    ; EB97: 2A F7     ; Wait for IRQB on CB1 (IDX) 166ms later
     276/    EFF3 : 5C                                  INCB                             ; EB99: 5C        ; B is 1 now
     277/    EFF4 : 80 4B                               SUBA    #$4B                     ; EB9A: 80 4B     ; 
     278/    EFF6 : 5C                  ZEB9C           INCB                             ; EB9C: 5C        ; 
     279/    EFF7 : 80 16                               SUBA    #$16                     ; EB9D: 80 16     ; 
     280/    EFF9 : 24 FB                               BCC     ZEB9C                    ; EB9F: 24 FB     ; 
     281/    EFFB : D7 19                               STAB    CLKFREQ                  ; EBA1: D7 19     ; B is 3 for 1MHz
     282/    EFFD : 7E E9 91                            JMP     ERRHNDLR                 ; EBA3: 7E E9 91  ; 
     283/    F000 :                     ;------------------------------------------------
     284/    F000 :                     	END
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 6 - 01/26/2026 09:51:58 PM


  Symbol Table (* = unused):
  --------------------------

 ADDRMRK :                       14 - |
*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - |  CHECKAGAIN :                  ED38 C |
*CLKDMD :                      EFDE C |  CLKFREQ :                       19 - |
*COMPMODE :                       0 - | *CONSTPI :        3.141592653589793 - |
 CURADRH :                        6 - |  CURDRV :                         0 - |
*CUSTOM :                         0 - | *DATE :                "01/26/2026" - |
 DRVRDY :                      E8C2 - |  ERRHNDLR :                    E991 - |
*FALSE :                          0 - | *FDSTAT :                         8 - |
*FULLPMMU :                       1 - |  FUNCSAV :                        E - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
 IE9A5 :                       EE5A C |  IEB07 :                       EDC3 C |
 IEB2A :                       EDE1 C |  IEB2C :                       EDE3 C |
 IEB43 :                       EDF7 C |  IEB4D :                       EE01 C |
 IEB53 :                       EE0A C |  IEB5D :                       EE17 C |
 IEB67 :                       EE24 C | *INEXTMODE :                      0 - |
*INLWORDMODE :                    0 - | *INMAXMODE :                      0 - |
*INSRCMODE :                      0 - | *INSUPMODE :                      0 - |
*LISTON :                         1 - | *MACEXP :                         7 - |
*MOMCPU :                      6800 - | *MOMCPUNAME :                "6800" - |
*NESTMAX :                      100 - |  NXTSEC :                      E9D2 - |
*PACKING :                        0 - | *PADDING :                        0 - |
*PIACTRL :                     EC02 - |  PIAREGA :                     EC00 - |
 PIAREGB :                     EC01 - | *READINIT :                    ED60 C |
*RELAXED :                        0 - |  RETRG :                       EAE0 - |
 SERR2 :                       ED90 C |  SERR3 :                       ED42 C |
 SETERR :                      E940 - |  SETUP :                       ED0B C |
 SSDA_0 :                      EC04 - |  SSDA_1 :                      EC05 - |
 STATSAV :                        D - |  STORE :                       ED33 C |
*STORTRACKS :                  EE40 - | *TIME :               "09:51:58 PM" - |
 TRACKSAV :                      13 - | *TRUE :                           1 - |
*VERSION :                     142F - |  WAIT1 :                       ED04 C |
 WAIT3 :                       ED02 C | *WRITINI2 :                    ED95 C |
 WRITSEC :                     EDE8 C | *Z80SYNTAX :                      0 - |
*ZE8AD :                       ED36 C |  ZEB8A :                       EFE4 C |
 ZEB90 :                       EFEA C |  ZEB91 :                       EFEB C |
 ZEB9C :                       EFF6 C |

     75 symbols
     38 unused symbols

 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 7 - 01/26/2026 09:51:58 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

    284 lines source file
      2 passes
      0 errors
      0 warnings
