 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 1 - 01/28/2026 04:07:58 PM


       1/       0 :                     
       2/       0 :                     ;CURDRV  EQU     $0000
       3/       0 :                     ;STRSCTH EQU     $0001
       4/       0 :                     ;STRSCTL EQU     $0002
       5/       0 :                     ;NUMSCTH EQU     $0003
       6/       0 :                     ;NUMSCTL EQU     $0004
       7/       0 :                     ;LSCTLN  EQU     $0005
       8/       0 : =$6                  CURADRH EQU     $0006
       9/       0 : =$7                  CURADRL EQU     $0007
      10/       0 : =$8                  FDSTAT  EQU     $0008
      11/       0 :                     ;CWRDCNT EQU     $0009
      12/       0 :                     ;SofTRK  EQU     $000A
      13/       0 :                     ;SECTCNT EQU     $000B
      14/       0 :                     ;STATSAV EQU     $000D
      15/       0 :                     ;FUNCSAV EQU     $000E
      16/       0 :                     ;NMIVECSAV EQU     $000F
      17/       0 :                     ;M0012   EQU     $0012 ; $11 and $12 are current Track of Drive 0,1
      18/       0 :                     ;TRACKSAV EQU    $0013
      19/       0 :                     ;ADDRMRK EQU     $0014
      20/       0 :                     ;DWRDCNT EQU     $0015
      21/       0 :                     ;STACKSAV EQU     $0016
      22/       0 :                     ;DRDCNT  EQU     $0018
      23/       0 :                     ;CLKFREQ EQU     $0019
      24/       0 : =$20                 LDADDR  EQU     $0020
      25/       0 : =$22                 EXADDR     EQU     $0022
      26/       0 : =$24                 ONECON     EQU     $0024
      27/       0 :                     
      28/       0 :                     ; The PIA has A0 and A1 switched!
      29/       0 :                     ; 00 with CRA2 Set is Peripheral Register A 
      30/       0 :                     ; 00 with CRA2 cleared is Data Direction Register A 
      31/       0 :                     ; 01 with CRB2 Set is Peripheral Register B 
      32/       0 :                     ; 01 with CRB2 cleared is Data Direction Register B 
      33/       0 :                     ; 02 is Control Register A
      34/       0 :                     ; 03 is Control Register B
      35/       0 :                     ;PIAREGA EQU     $EC00
      36/       0 :                     ;PIAREGB EQU     $EC01
      37/       0 :                     ;PIACTRL EQU     $EC02
      38/       0 :                     ;SSDA_0  EQU     $EC04
      39/       0 :                     ;SSDA_1  EQU     $EC05
      40/       0 :                     
      41/       0 : =$EC10               LPTPIA0 EQU     $EC10
      42/       0 : =$EC11               LPTPIA1 EQU     $EC11
      43/       0 : =$EC12               LPTPIA2 EQU     $EC12
      44/       0 : =$EC13               LPTPIA3 EQU     $EC13
      45/       0 :                     
      46/       0 :                     ;DSLOAD  EQU  $E800 ; BOOTSTRAP THE OPERATING SYSTEM
      47/       0 : =$E822               FDINIT  EQU  $E822 ; INITIALIZE THE DISK'S PIA AND SSD
      48/       0 :                     ;CHKERR  EQU  $E853 ; CHECK AND PRINT ERROR FROM FDSTAT
      49/       0 :                     ;PRNTER  EQU  $E85A ; PRINT ERROR FROM FDSTAT
      50/       0 :                     ;READSC  EQU  $E869 ; READ SECTOR(S)
      51/       0 :                     ;READPS  EQU  $E86D ; READ PARTIAL SECTOR
      52/       0 :                     ;RDCRC   EQU  $E86F ; READ AND CHECK FOR CRC
      53/       0 :                     ;RWTEST  EQU  $E872 ; WRITE/READ TEST
      54/       0 : =$E875               RESTOR  EQU  $E875 ; MOVE HEAD TO TRACK 0
      55/       0 :                     ;SEEK    EQU  $E878 ; POSITION HEAD TO TRACK OF "STRSCT
      56/       0 :                     ;WRTEST  EQU  $E87B ; WRITE TEST
      57/       0 :                     ;WRDDAM  EQU  $E87E ; WRITE DELETED DATA MARK
      58/       0 :                     ;WRVERF  EQU  $E881 ; WRITE AND VERIFY CRC
      59/       0 :                     ;WRITSC  EQU  $E884 ; WRITE SECTDR(S)
      60/       0 :                     
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 2 - 01/28/2026 04:07:58 PM


      61/       0 : =$E855               PRNTE2  EQU  $E855 ; Jump Back into old EPROM
      62/       0 :                     
      63/       0 :                     ; ################################################################
      64/       0 :                     ; Jump Table
      65/       0 :                     ; ################################################################
      66/    ED00 :                     		ORG $ED00
      67/    ED00 : 7E ED 1B            ED00	jmp EXIT
      68/    ED03 : 7E ED 1C            ED03    jmp TOP
      69/    ED06 : 7E ED 40            ED06    jmp LPINIT
      70/    ED09 : 7E ED 4C            ED09    jmp LIST
      71/    ED0C : 7E ED 64            ED0C    jmp LDATA
      72/    ED0F : 7E ED 72            ED0F    jmp LDATA1
      73/    ED12 : 7E ED 1B            ED12    jmp EXIT
      74/    ED15 : 7E ED 1B            ED15    jmp EXIT
      75/    ED18 : 7E ED 1B            ED18    jmp EXIT
      76/    ED1B : 39                  EXIT    rts
      77/    ED1C :                     
      78/    ED1C :                     ;------------------------------------------------
      79/    ED1C :                     ; Disk Mini Diagnostic Routine (CLRTOP is in original ROM)
      80/    ED1C :                     ;------------------------------------------------
      81/    ED1C : BD E8 22            TOP             JSR     FDINIT                   ; EB98: BD E8 22 ; Diagnostic without clear
      82/    ED1F : BD E8 75                            JSR     RESTOR                   ; EB9B: BD E8 75 ; 
      83/    ED22 : DE 20               ZEB9E           LDX     LDADDR                   ; EB9E: DE 20    ; 
      84/    ED24 : DF 06                               STX     CURADRH                  ; EBA0: DF 06    ; 
      85/    ED26 : DE 22                               LDX     EXADDR                   ; EBA2: DE 22    ; must contain addres of function (READSC,...)
      86/    ED28 : AD 00                               JSR     ,X                       ; EBA4: AD 00    ; 
      87/    ED2A : 96 24                               LDAA    ONECON                   ; EBA6: 96 24    ; 
      88/    ED2C : 26 0F                               BNE     ZEBB9                    ; EBA8: 26 0F    ; 
      89/    ED2E : 97 07                               STAA    CURADRL                  ; EBAA: 97 07    ; 
      90/    ED30 : 78 00 08                            ASL     FDSTAT                   ; EBAC: 78 00 08 ; 
      91/    ED33 : DE 07                               LDX     CURADRL                  ; EBAF: DE 07    ; 
      92/    ED35 : 6C 01                               INC     $01,X                    ; EBB1: 6C 01    ; 
      93/    ED37 : 26 E9                               BNE     ZEB9E                    ; EBB3: 26 E9    ; 
      94/    ED39 : 6C 00                               INC     ,X                       ; EBB5: 6C 00    ; 
      95/    ED3B : 26 E5                               BNE     ZEB9E                    ; EBB7: 26 E5    ; 
      96/    ED3D : 7E E8 55            ZEBB9           JMP     PRNTE2                  ; EBB9: 7E E8 55 ; Print Error Code
      97/    ED40 :                     
      98/    ED40 :                     ;------------------------------------------------
      99/    ED40 :                     ; Line Printer Routines
     100/    ED40 :                     ;------------------------------------------------
     101/    ED40 : CE FF 2E            LPINIT          LDX     #$FF2E                   ; EBC0: CE FF 2E ; Line Printer Init
     102/    ED43 : FF EC 10                            STX     LPTPIA0                  ; EBC3: FF EC 10 ; <------------------------------------ no RAM here!
     103/    ED46 : 86 3C                               LDAA    #$3C                     ; EBC6: 86 3C    ; 
     104/    ED48 : B7 EC 13                            STAA    LPTPIA3                  ; EBC8: B7 EC 13 ; <------------------------------------ no RAM here!
     105/    ED4B : 39                                  RTS                              ; EBCB: 39       ; 
     106/    ED4C :                     ;------------------------------------------------
     107/    ED4C : B7 EC 10            LIST            STAA    LPTPIA0                  ; EBCC: B7 EC 10 ; Print contents of A
     108/    ED4F : B6 EC 10                            LDAA    LPTPIA0                  ; EBCF: B6 EC 10 ; <------------------------------------ no RAM here!
     109/    ED52 : 37                  ZEBD2           PSHB                             ; EBD2: 37       ; 
     110/    ED53 : F6 EC 12                            LDAB    LPTPIA2                  ; EBD3: F6 EC 12 ; <------------------------------------ no RAM here!
     111/    ED56 : C4 03                               ANDB    #$03                     ; EBD6: C4 03    ; 
     112/    ED58 : 5A                                  DECB                             ; EBD8: 5A       ; 
     113/    ED59 : 33                                  PULB                             ; EBD9: 33       ; 
     114/    ED5A : 26 06                               BNE     ZEBE2                    ; EBDA: 26 06    ; 
     115/    ED5C : 7D EC 11                            TST     LPTPIA1                  ; EBDC: 7D EC 11 ; <------------------------------------ no RAM here!
     116/    ED5F : 2A F1                               BPL     ZEBD2                    ; EBDF: 2A F1    ; 
     117/    ED61 : 39                                  RTS                              ; EBE1: 39       ; 
     118/    ED62 :                     ;------------------------------------------------
     119/    ED62 : 0D                  ZEBE2           SEC                              ; EBE2: 0D       ; 
     120/    ED63 : 39                                  RTS                              ; EBE3: 39       ; 
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 3 - 01/28/2026 04:07:58 PM


     121/    ED64 :                     ;------------------------------------------------
     122/    ED64 : 86 0D               LDATA           LDAA    #$0D                     ; EBE4: 86 0D    ; Send String to Printer
     123/    ED66 : 8D E4               ZEBE6           BSR     LIST                     ; EBE6: 8D E4    ; 
     124/    ED68 : 25 FC                               BCS     ZEBE6                    ; EBE8: 25 FC    ; 
     125/    ED6A : 86 0A                               LDAA    #$0A                     ; EBEA: 86 0A    ; 
     126/    ED6C : 09                                  DEX                              ; EBEC: 09       ; 
     127/    ED6D : 8D DD               ZEBED           BSR     LIST                     ; EBED: 8D DD    ; 
     128/    ED6F : 25 FC                               BCS     ZEBED                    ; EBEF: 25 FC    ; 
     129/    ED71 : 08                                  INX                              ; EBF1: 08       ; 
     130/    ED72 : A6 00               LDATA1          LDAA    ,X                       ; EBF2: A6 00    ; 
     131/    ED74 : 81 04                               CMPA    #$04                     ; EBF4: 81 04    ; 
     132/    ED76 : 26 F5                               BNE     ZEBED                    ; EBF6: 26 F5    ; 
     133/    ED78 : 39                                  RTS                              ; EBF8: 39       ; 
     134/    ED79 :                     
     135/    ED79 :                     
     136/    ED79 :                     
     137/    ED79 :                     
     138/    ED79 :                     
     139/    ED79 :                     
     140/    ED79 :                     
     141/    ED79 :                     ;WAIT4	ldx 	#$800
     142/    ED79 :                     ;WAIT3    LDAB    CLKFREQ     ; is 3 for 1MHz
     143/    ED79 :                     ;WAIT1    DECB                ; 
     144/    ED79 :                     ;         BNE     WAIT1       ; 
     145/    ED79 :                     ;         DEX                 ; 
     146/    ED79 :                     ;         BNE     WAIT3       ; 
     147/    ED79 :                     ;         RTS                 ; 
     148/    ED79 :                     
     149/    ED79 :                     	END
 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 4 - 01/28/2026 04:07:58 PM


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - | *COMPMODE :                       0 - |
*CONSTPI :        3.141592653589793 - |  CURADRH :                        6 - |
 CURADRL :                        7 - | *CUSTOM :                         0 - |
*DATE :                "01/28/2026" - | *ED00 :                        ED00 C |
*ED03 :                        ED03 C | *ED06 :                        ED06 C |
*ED09 :                        ED09 C | *ED0C :                        ED0C C |
*ED0F :                        ED0F C | *ED12 :                        ED12 C |
*ED15 :                        ED15 C | *ED18 :                        ED18 C |
 EXADDR :                        22 - |  EXIT :                        ED1B C |
*FALSE :                          0 - |  FDINIT :                      E822 - |
 FDSTAT :                         8 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
*INEXTMODE :                      0 - | *INLWORDMODE :                    0 - |
*INMAXMODE :                      0 - | *INSRCMODE :                      0 - |
*INSUPMODE :                      0 - |  LDADDR :                        20 - |
 LDATA :                       ED64 C |  LDATA1 :                      ED72 C |
 LIST :                        ED4C C | *LISTON :                         1 - |
 LPINIT :                      ED40 C |  LPTPIA0 :                     EC10 - |
 LPTPIA1 :                     EC11 - |  LPTPIA2 :                     EC12 - |
 LPTPIA3 :                     EC13 - | *MACEXP :                         7 - |
*MOMCPU :                      6800 - | *MOMCPUNAME :                "6800" - |
*NESTMAX :                      100 - |  ONECON :                        24 - |
*PACKING :                        0 - | *PADDING :                        0 - |
 PRNTE2 :                      E855 - | *RELAXED :                        0 - |
 RESTOR :                      E875 - | *TIME :               "04:07:58 PM" - |
 TOP :                         ED1C C | *TRUE :                           1 - |
*VERSION :                     142F - | *Z80SYNTAX :                      0 - |
 ZEB9E :                       ED22 C |  ZEBB9 :                       ED3D C |
 ZEBD2 :                       ED52 C |  ZEBE2 :                       ED62 C |
 ZEBE6 :                       ED66 C |  ZEBED :                       ED6D C |

     65 symbols
     40 unused symbols

 AS V1.42 Beta [Bld 216] - Source File extra.asm - Page 5 - 01/28/2026 04:07:58 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

    149 lines source file
      2 passes
      0 errors
      0 warnings
